<!DOCTYPE html>
<html lang="en">
<head>
    <th:block th:replace="component/config :: config"></th:block>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
</head>
<body>
<div class="container">
    <div th:replace="component/header :: header"></div>
    <div class="text-center">
        <img th:src="@{|/upload/${board.storedFileName}}"
             alt="" style="max-width: 100%; height: auto">
    </div>
    <div>
        <input type="hidden" id="id" th:value="${board.id}">
        조회수: <input type="text" th:value="${board.boardHits}">
        좋아요수: <input type="text" th:value="${countBoardLikes}">
        <h4>착용제품</h4>
        <div>
            <p th:text="${board.top}"></p>
            <p th:text="${board.topDetail}"></p>
            <p th:text="${board.topPrice}"></p>
        </div>
        <div>
            <p th:text="${board.bottom}"></p>
            <p th:text="${board.bottomDetail}"></p>
            <p th:text="${board.bottomPrice}"></p>
        </div>
        <div>
            <p th:text="${board.etc}"></p>
            <p th:text="${board.etcDetail}"></p>
            <p th:text="${board.etcPrice}"></p>
        </div>
        <div id="likeButton" class="btn btn-outline-secondary">
            <i id="likeIcon" class="bi bi-heart"></i> 좋아요
        </div>
        <div>
            <button class="btn btn-primary" th:onclick="update([[${board.id}]])">수정</button>
        </div>

    </div>
</div>
</body>
<script th:inline="javascript">
    const update = (id) => {
        location.href = "/adminBoard/update/" + id;
    }

    // 좋아요 버튼을 클릭할 때마다 아이콘과 텍스트를 변경하는 함수를 작성합니다.
    const toggleLike = () => {
        const icon = document.getElementById("likeIcon");
        const button = document.getElementById("likeButton");
        const id = document.querySelector("#id").value;
        console.log(id)

        axios({
            method: "get",
            url: "/detail/" + id,
        }).then(res => {
            icon.classList.remove("bi-heart");
            icon.classList.add("bi-heart-fill");
            button.innerHTML = '<i id="likeIcon" class="bi bi-heart-fill"></i> 좋아요';
        }).catch(err => {
            icon.classList.remove("bi-heart-fill");
            icon.classList.add("bi-heart");
            button.innerHTML = '<i id="likeIcon" class="bi bi-heart"></i> 좋아요';
        });
    }

    // 좋아요 버튼에 클릭 이벤트를 등록합니다.
    document.getElementById("likeButton").addEventListener("click", toggleLike);
</script>

</script>
</html>