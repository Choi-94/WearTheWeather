<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>

<body>
<div th:fragment="nav" class="container" id="nav">
    <div class="box" style="background-color: #558BCF;">

        div
        <div class="dropdown">
            <button type="button" onclick="findByMyAlarm()"
                    class="btn btn-primary dropdown-toggle bg-transparent border-0" data-bs-toggle="dropdown"
                    style="position: absolute; top:-33px; left: 1020px;">

                <i class="bi bi-bell fs-4"></i>
            </button>
            <div>
                <ul class="dropdown-menu flex-column" id="dropdownList">
                    <li style="display: block;">

                    </li>
                </ul>
            </div>
        </div>
        <ul>
            <li style="font-size: 20px;">
                <a href="/adminBoard/list">오늘의 코디</a>
                <a href="/memberBoard/ranking">실시간 랭킹</a>
                <a href="/memberBoard/list">코디 콘테스트</a>
                <a href="/market/list">웨더마켓</a>
            </li>
        </ul>
        <ul>
            <li class="board-name" id="board-area">
                <a href="#">
                    <i class="bi bi-search"></i>
                </a>
                <a href="#">
                    <i class="bi bi-person-fill"></i>
                </a>
            </li>
        </ul>
    </div>
    <script th:inline="javascript">

        const findByMyAlarm = () => {
            const resultArea = document.querySelector("#dropdownList");
            resultArea.innerHTML = "";

            axios({
                method: "get",
                url: "/alarm/findByMyAlarm"
            }).then(res => {
                console.log(res.data);

                const alarmList = res.data;

                alarmList.forEach(function (item) {
                    const li = document.createElement('li');
                    const message = item.message;
                    const id = item.boardId;

                    const a = document.createElement('a');
                    a.classList.add('dropdown-item', 'text-dark');
                    a.href = `/memberBoard/detail/` + id; // 게시물 상세 페이지 주소를 설정합니다.
                    a.textContent = message;

                    li.style.display = 'block';
                    li.appendChild(a);
                    resultArea.appendChild(li);
                });
            }).catch(err => {

            });
        }

    </script>

</div>

</body>
</html>